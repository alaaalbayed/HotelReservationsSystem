@model IEnumerable<Domain.DTO_s.Room>
@using Microsoft.AspNetCore.Mvc.Localization;
@using System.Globalization;

@inject IViewLocalizer localizer

@{
    var check = CultureInfo.CurrentCulture.Name;
    ViewData["Title"] = "Rooms";
    ViewData["ActivePage"] = "Rooms";
}

<div class="wrapper">
    <partial name="_Slide" />
    <div class="main">
        <partial name="_Navbar" />
        <main class="content">
            <div class="row row-cards">
                <div class="col-lg-12 text-center">
                    <div class="card p-3">
                        @if (check == "en-US")
                        {
                            <table class="table table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            @localizer["Capacity"]
                                        </th>
                                        <th>
                                            @localizer["PricePerNight"]
                                        </th>
                                        <th>
                                            @localizer["RoomNumber"]
                                        </th>
                                        <th>
                                            @localizer["RoomType"]
                                        </th>
                                        <th>
                                            @localizer["Events"]
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model)
                                    {
                                        <tr>
                                            <td>
                                                @Html.DisplayFor(x => item.Capacity)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(x => item.PricePerNight)$
                                            </td>
                                            <td>
                                                @Html.DisplayFor(x => item.RoomNumber)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(x => item.RoomType.NameEn)
                                            </td>
                                            
                                            <td class="col-5">

                                                <a asp-action="Edit" asp-route-id="@item.RoomId" class="btn btn-success btn-icon btn-sm" aria-label="Button">
                                                    @localizer["Edit"]
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-edit" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                        <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"></path>
                                                        <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"></path>
                                                        <path d="M16 5l3 3"></path>
                                                    </svg>
                                                </a> |
                                                <a asp-action="Info" asp-route-id="@item.RoomId" class="btn btn-warning btn-icon btn-sm" aria-label="Button">
                                                    @localizer["Info"]
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-id" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                        <path d="M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"></path>
                                                        <path d="M9 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                                        <path d="M15 8l2 0"></path>
                                                        <path d="M15 12l2 0"></path>
                                                        <path d="M7 16l10 0"></path>
                                                    </svg>
                                                </a> |
                                                @if (item.Status)
                                                {
                                                    <button class="btn btn-primary btn-icon btn-sm deleteButton" aria-label="Button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="showDeleteModal('@Url.Action("Delete", new { id = item.RoomId })')">
                                                        @localizer["Activate"]
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circle-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                            <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path>
                                                            <path d="M9 12l2 2l4 -4"></path>
                                                        </svg>
                                                    </button>
                                                }
                                                else
                                                {
                                                    <button class="btn btn-danger btn-icon btn-sm deleteButton" aria-label="Button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="showDeleteModal('@Url.Action("Delete", new { id = item.RoomId })')">
                                                        @localizer["Delete"]
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                            <path d="M4 7l16 0"></path>
                                                            <path d="M10 11l0 6"></path>
                                                            <path d="M14 11l0 6"></path>
                                                            <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                                                            <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                                                        </svg>
                                                    </button>
                                                }
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        }
                        else
                        {
                            <table class="table table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            @localizer["Events"]
                                        </th>
                                        <th>
                                            @localizer["RoomType"]
                                        </th>
                                        <th>
                                            @localizer["RoomNumber"]
                                        </th>
                                        <th>
                                            @localizer["PricePerNight"]
                                        </th>
                                        <th>
                                            @localizer["Capacity"]
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model)
                                    {
                                        <tr>
                                            <td class="col-5">
                                                @if (item.Status)
                                                {
                                                    <button class="btn btn-primary btn-icon btn-sm deleteButton" aria-label="Button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="showDeleteModal('@Url.Action("Delete", new { id = item.RoomId })')">
                                                        @localizer["Activate"]
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-circle-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                            <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path>
                                                            <path d="M9 12l2 2l4 -4"></path>
                                                        </svg>
                                                    </button>
                                                }
                                                else
                                                {
                                                    <button class="btn btn-danger btn-icon btn-sm deleteButton" aria-label="Button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="showDeleteModal('@Url.Action("Delete", new { id = item.RoomId })')">
                                                        @localizer["Delete"]
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                            <path d="M4 7l16 0"></path>
                                                            <path d="M10 11l0 6"></path>
                                                            <path d="M14 11l0 6"></path>
                                                            <path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path>
                                                            <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path>
                                                        </svg>
                                                    </button>
                                                } |
                                                <a asp-action="Info" asp-route-id="@item.RoomId" class="btn btn-warning btn-icon btn-sm" aria-label="Button">
                                                    @localizer["Info"]
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-id" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                        <path d="M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"></path>
                                                        <path d="M9 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                                        <path d="M15 8l2 0"></path>
                                                        <path d="M15 12l2 0"></path>
                                                        <path d="M7 16l10 0"></path>
                                                    </svg>
                                                </a> |
                                                <a asp-action="Edit" asp-route-id="@item.RoomId" class="btn btn-success btn-icon btn-sm" aria-label="Button">
                                                    @localizer["Edit"]
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-edit" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                        <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"></path>
                                                        <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"></path>
                                                        <path d="M16 5l3 3"></path>
                                                    </svg>
                                                </a>
                                            </td>
                                            <td>
                                                @Html.DisplayFor(x => item.RoomType.NameAr)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(x => item.RoomNumber)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(x => item.PricePerNight)$
                                            </td>
                                            <td>
                                                @Html.DisplayFor(x => item.Capacity)
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        }
                        <p class="text-center me-4">
                            <a asp-action="Create" class="btn btn-primary position-relative start-50 mt-3 me-6">@localizer["Create"]</a>
                        </p>
                    </div>
                </div>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">@localizer["DeleteConfirmation"]</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            @localizer["AreYouSureDelete"]
                        </div>

                        <div class="modal-footer">
                            @if (check == "en-US")
                            {
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">@localizer["Close"]</button>
                                <button type="button" class="btn btn-primary" id="deleteButton">@localizer["Yes"]</button>
                            }
                            else
                            {
                                <button type="button" class="btn btn-primary" id="deleteButton">@localizer["Yes"]</button>
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">@localizer["Close"]</button>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <partial name="_Footer" />
    </div>
</div>

@section scripts {
    <script>
        var deleteButton = document.getElementById("deleteButton");
        var deleteUrl = null;

        deleteButton.addEventListener("click", function () {
            if (deleteUrl) {
                location.href = deleteUrl;
            }
        });

        function showDeleteModal(url) {
            deleteUrl = url;
        }
    </script>
}